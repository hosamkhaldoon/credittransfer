{
  "Logging": {
    "LogLevel": {
      "Default": "Information",
      "Microsoft.AspNetCore": "Warning",
      "Microsoft.AspNetCore.Authentication": "Debug",
      "CoreWCF": "Debug",
      "CreditTransfer": "Debug",
      "CreditTransfer.Authentication": "Debug"
    }
  },
  "AllowedHosts": "*",
  "ConnectionStrings": {
    "DefaultConnection": "Server=10.1.133.31;Database=CreditTransfer;User Id=sa;Password=fas@335$;TrustServerCertificate=true;"
  },
  "Redis": {
    "ConnectionString": "localhost:6379,password=CreditTransfer2024!",
    "InstanceName": "CreditTransfer"
  },
  
  "_documentation": {
    "_note": "Keycloak JWT Configuration removed and replaced with Basic Auth + Keycloak integration"
  },
  
  "BasicAuthentication": {
    "Realm": "CreditTransfer API",
    "EnableCaching": true,
    "CacheExpirationMinutes": 15,
    "MaxFailedAttempts": 5,
    "LockoutDurationMinutes": 30,
    "PasswordMinLength": 8,
    "RequireStrongPasswords": false,
    "LogAuthenticationAttempts": true,
    "EnableDetailedLogging": true
  },
  
  "KeycloakServiceAccount": {
    "BaseUrl": "http://localhost:30080",
    "Realm": "credittransfer",
    "ClientId": "credittransfer-basic-auth",
    "ClientSecret": "basic-auth-service-secret-2024",
    "TokenEndpoint": "/realms/credittransfer/protocol/openid-connect/token",
    "AdminApiBaseUrl": "/admin/realms/credittransfer",
    "ConnectionTimeoutSeconds": 30,
    "RequestTimeoutSeconds": 10,
    "MaxRetryAttempts": 3,
    "RetryDelaySeconds": 2,
    "EnableHttpsValidation": false,
    "UserAgent": "CreditTransfer-BasicAuth/1.0"
  },
  
  "AuthenticationCache": {
    "Provider": "Redis",
    "DefaultExpiration": "00:15:00",
    "SlidingExpiration": true,
    "MaxCacheSize": 10000,
    "CacheKeyPrefix": "auth:",
    "EnableCacheStatistics": true,
    "CleanupIntervalMinutes": 60
  },
  
  "RoleMapping": {
    "EnableRoleMapping": true,
    "DefaultRole": "credit-transfer-user",
    "RoleHierarchy": {
      "credit-transfer-admin": ["credit-transfer-operator", "credit-transfer-user"],
      "credit-transfer-operator": ["credit-transfer-user"],
      "system-user": ["credit-transfer-user"]
    },
    "OperationPermissions": {
      "TransferCredit": ["credit-transfer-admin", "credit-transfer-operator", "system-user"],
      "TransferCreditWithAdjustmentReason": ["credit-transfer-admin", "credit-transfer-operator"],
      "TransferCreditWithoutPinforSC": ["credit-transfer-admin", "system-user"],
      "GetDenomination": ["*"],
      "ValidateTransferInputs": ["*"]
    }
  },
  
  "SecuritySettings": {
    "RequireHttps": false,
    "EnableAccountLockout": true,
    "EnableBruteForceProtection": true,
    "MaxConcurrentSessions": 100,
    "SessionTimeoutMinutes": 60,
    "EnableAuditLogging": true,
    "SensitiveDataMasking": true,
    "PasswordValidation": {
      "MinLength": 8,
      "RequireDigit": false,
      "RequireLowercase": false,
      "RequireUppercase": false,
      "RequireNonAlphanumeric": false,
      "MaxLength": 128
    }
  },
  
  "CreditTransfer": {
    "MsisdnLength": 12,
    "RefillPinLength": 4,
    "EnableExtendedDays": false,
    "DefaultPIN": "0000",
    "MaximumPercentageAmount": 1.0,
    "CustomerToCustomerTransferMoneyReason": "C2C",
    "Denominations": [ 1, 2, 5, 10, 20, 50, 100 ],
    "MinTransferAmount": 1.0,
    "MaxTransferAmount": 1000.0,
    "MaxDailyTransferCount": 10,
    "MinPostTransferBalance": 0.5,
    "CreditTransferCustomerService": "CreditTransfer",
    "TransactionTimeoutSeconds": 30,
    "EnableTransactionLogging": true,
    "EnableAuditTrail": true,
    "SmsConfiguration": {
      "EnableSms": true,
      "SenderName": "Virgin",
      "DefaultLanguage": "en",
      "SupportedLanguages": ["en", "ar"],
      "MessageQueueUrl": "http://messagequeue:5672"
    }
  },
  
  "Observability": {
    "EnableMetrics": true,
    "EnableTracing": true,
    "EnableLogging": true,
    "MetricsPrefix": "credittransfer_basicauth_",
    "TracingServiceName": "credittransfer-wcf-basicauth",
    "CustomMetrics": {
      "AuthenticationAttempts": true,
      "AuthenticationSuccess": true,
      "AuthenticationFailures": true,
      "CacheHitRate": true,
      "KeycloakApiCalls": true,
      "ResponseTimes": true
    }
  },
  
  "OpenTelemetry": {
    "ServiceName": "CreditTransfer.WcfService",
    "ServiceVersion": "2.0.0",
    "EnableConsoleExporter": true,
    "EnableJaegerExporter": true,
    "JaegerEndpoint": "http://jaeger:14268/api/traces",
    "EnablePrometheusExporter": true,
    "PrometheusEndpoint": "/metrics",
    "SamplingRatio": 1.0,
    "EnableSqlInstrumentation": true,
    "EnableHttpInstrumentation": true,
    "EnableRuntimeInstrumentation": true
  },
  
  "ExternalServices": {
    "MessageQueue": {
      "ConnectionString": "amqp://guest:guest@messagequeue:5672/",
      "QueueName": "sms-notifications",
      "EnableRetry": true,
      "MaxRetryAttempts": 3,
      "RetryDelaySeconds": 5
    },
    "NobillCalls": {
      "ServiceUrl": "http://nobillcalls:8080/nobillcalls",
      "Username": "transfercredit",
      "Password": "p@ssw0rd",
      "TimeoutSeconds": 30,
      "EnableRetry": true,
      "MaxRetryAttempts": 3
    }
  }
} 